function isundef(e){return"undefined"==typeof e}function Value(e,t,n){function i(e){return e instanceof Value}function r(e){if(e)switch(typeof e){case"object":a(e);break;case"string":e in this.formatters&&a(this.formatters[e]);break;case"function":M=e}}function a(e){switch(l(e.separator)&&(S=e.separator),l(e.symbol)&&(P=e.symbol),c(e.position)&&(I=e.position),l(e.nill)&&(z=e.nill),o(e.decimal_digits)&&(C=e.decimal_digits),o(e.storing_precision)&&(O=e.storing_precision),"boolean"==typeof e.format_thousands&&($=e.format_thousands),I){case"before":A=P+S;break;case"after":default:U=S+P}M=j.format}function o(e){return!isNaN(parseFloat(e))}function s(e){return Math.abs(e)}function u(e){return-1*Math.abs(e)}function l(e){return"string"==typeof e}function c(e){return l(e)&&e.length}function d(e){return e>=_&&w>=e}function f(e){var t=Math.floor(e),n=e.toFixed(2).split(".")[1],i=t+"",r=i.length,a=r%3||3,o=i.substr(0,a),s=i.substr(a);return s=s.replace(/(\d{3})/g,",$1"),"00"!==n&&(s+="."+n),o+s}function p(e,t){var n=y+e;g.set(n,t)}function h(e){var t=e&&e.call(g,g);if(t!==!1)for(var n=0,i=N.length;i>n;n++)N[n].call(g,g)}function m(e){F=e-y}function v(e){T||(y=e)}if(!i(this))return new Value(e,t,n);var b;b="object"==typeof e?e:{value:e,min:t,max:n};var g=this,y=o(b.value)&&b.value||0,_=o(b.min)&&b.min||(y>=0?0:y),w=o(b.max)&&b.max||Number.MAX_VALUE,E=o(b.nudge)&&s(b.nudge)||1,x=o(b.plus_nudge)&&s(b.plus_nudge)||E,k=o(b.minus_nudge)&&u(b.minus_nudge)||u(E),T="boolean"==typeof b.frozen?b.frozen:!1,S="",P="",I="after",z="",$=!1,C=0,O=2,A="",U="",N=[],F=0,j={format:function(e){var t,n=e||y;C&&(t=n.toFixed(C)),t=$?f(n):n+"";var i=A+t+U;return 0===n&&z&&(i=z),i},unformat:function(e){var e=e+"";return e===z?0:e.replace(/[^0-9\.]/gi,"")}},M=j.format,R=j.unformat;r.call(this,b.format),b.unformat&&(R=b.unformat),g.format=function(e){return e?(r.call(this,e),g):{separator:S,symbol:P,position:I,nill:z,format_thousands:$}},g.setNudge=function(e){return o(e)?(E=s(e),x=s(E),k=u(E),g):E},g.plusNudge=function(e){return o(e)?(x=s(e),g):x},g.minusNudge=function(e){return o(e)?(k=u(e),g):k},g.nudge=function(e,t){return p(e,t),g},g.plus=function(e,t){var n=o(arguments[0])?e:x,t="function"==typeof arguments[0]?arguments[0]:arguments[1];return p(n,t),g},g.minus=function(e,t){var n=o(arguments[0])?-1*e:k,t="function"==typeof arguments[0]?arguments[0]:arguments[1];return p(n,t),g},g.get=function(){return M(y)},g.set=function(e,t){return l(e)&&(e=R(e,j.unformat)),o(e)&&(e=parseFloat(e)),isNaN(e)||(d(e)?e!==y&&(e=+e.toFixed(O),m(e),v(e),h(t)):(_>e&&g.set(_),e>w&&g.set(w))),g},this.value=function(){return y},this.max=function(e){return o(e)?(w=e,d(y)||g.set(w),_>w&&g.min(w),g):w},this.min=function(e){return o(e)?(_=e,d(y)||g.set(_),_>w&&g.max(_),g):_},this.delta=function(){return F},this.freeze=function(){return T=!0,g},this.defrost=function(){return T=!1,g},this.subscribe=function(e){return N.push(e),g},this.derive=function(){for(var e=Array.prototype.slice.apply(arguments,[0,arguments.length-1]),t=arguments[arguments.length-1],n=function(){g.set(t.apply(g,e))},r=0,a=arguments.length-1;a>r;r++){var o=arguments[r];if(!i(o))return!1;o.subscribe(n)}return n(),g},this.refresh=function(){h()},this.toString=this.get,this.valueOf=this.value,this.toJSON=this.value}function resizeUIElems(){UI.progress.reset_width(),UI.progress.update(),UI.adjustTextSize("#time"),UI.adjustTextSize("#game_blinds")}function displayMaximizeNotification(){UI.message.show('Free version users can\'t maximize or go fullscreen. <a href="http://www.thepokertimer.com/upgrade" class="browser">Upgrade to Premium</a> to be able to run the application fullscreen.',"Can't maximize window")}!function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===e&&(Array.prototype.reduce=function(t){if(void 0===this||null===this)throw new TypeError;var n,i=Object(this),r=i.length>>>0,a=0;if("function"!=typeof t)throw new TypeError;if(0==r&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(a in i){n=i[a++];break}if(++a>=r)throw new TypeError}for(;r>a;)a in i&&(n=t.call(e,n,i[a],a,i)),a++;return n})}();var Zepto=function(){function e(e){return"[object Function]"==M.call(e)}function t(e){return e instanceof Object}function n(t){var n,i;if("[object Object]"!==M.call(t))return!1;if(i=e(t.constructor)&&t.constructor.prototype,!i||!hasOwnProperty.call(i,"isPrototypeOf"))return!1;for(n in t);return n===m||hasOwnProperty.call(t,n)}function i(e){return e instanceof Array}function r(e){return"number"==typeof e.length}function a(e){return e.filter(function(e){return e!==m&&null!==e})}function o(e){return e.length>0?[].concat.apply([],e):e}function s(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(e){return e in T?T[e]:T[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function l(e,t){return"number"!=typeof t||P[s(e)]?t:t+"px"}function c(e){var t,n;return k[e]||(t=x.createElement(e),x.body.appendChild(t),n=S(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),k[e]=n),k[e]}function d(e,t){return t===m?b(e):b(e).filter(t)}function f(t,n,i,r){return e(n)?n.call(t,i,r):n}function p(e,t,n){var i=e%2?t:t.parentNode;i?i.insertBefore(n,e?1==e?i.firstChild:2==e?t:null:t.nextSibling):b(n).remove()}function h(e,t){t(e);for(var n in e.childNodes)h(e.childNodes[n],t)}var m,v,b,g,y,_,w=[],E=w.slice,x=window.document,k={},T={},S=x.defaultView.getComputedStyle,P={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,z=[1,3,8,9,11],$=["after","prepend","before","append"],C=x.createElement("table"),O=x.createElement("tr"),A={tr:x.createElement("tbody"),tbody:C,thead:C,tfoot:C,td:O,th:O,"*":x.createElement("div")},U=/complete|loaded|interactive/,N=/^\.([\w-]+)$/,F=/^#([\w-]+)$/,j=/^[\w-]+$/,M={}.toString,R={},L=x.createElement("div");return R.matches=function(e,t){if(!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,a=!r;return a&&(r=L).appendChild(e),i=~R.qsa(r,t).indexOf(e),a&&L.removeChild(e),i},y=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},_=function(e){return e.filter(function(t,n){return e.indexOf(t)==n})},R.fragment=function(e,t){t===m&&(t=I.test(e)&&RegExp.$1),t in A||(t="*");var n=A[t];return n.innerHTML=""+e,b.each(E.call(n.childNodes),function(){n.removeChild(this)})},R.Z=function(e,t){return e=e||[],e.__proto__=arguments.callee.prototype,e.selector=t||"",e},R.isZ=function(e){return e instanceof R.Z},R.init=function(t,r){if(t){if(e(t))return b(x).ready(t);if(R.isZ(t))return t;var o;if(i(t))o=a(t);else if(n(t))o=[b.extend({},t)],t=null;else if(z.indexOf(t.nodeType)>=0||t===window)o=[t],t=null;else if(I.test(t))o=R.fragment(t.trim(),RegExp.$1),t=null;else{if(r!==m)return b(r).find(t);o=R.qsa(x,t)}return R.Z(o,t)}return R.Z()},b=function(e,t){return R.init(e,t)},b.extend=function(e){return E.call(arguments,1).forEach(function(t){for(v in t)t[v]!==m&&(e[v]=t[v])}),e},R.qsa=function(e,t){var n;return e===x&&F.test(t)?(n=e.getElementById(RegExp.$1))?[n]:w:1!==e.nodeType&&9!==e.nodeType?w:E.call(N.test(t)?e.getElementsByClassName(RegExp.$1):j.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))},b.isFunction=e,b.isObject=t,b.isArray=i,b.isPlainObject=n,b.inArray=function(e,t,n){return w.indexOf.call(t,e,n)},b.trim=function(e){return e.trim()},b.uuid=0,b.map=function(e,t){var n,i,a,s=[];if(r(e))for(i=0;i<e.length;i++)n=t(e[i],i),null!=n&&s.push(n);else for(a in e)n=t(e[a],a),null!=n&&s.push(n);return o(s)},b.each=function(e,t){var n,i;if(r(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},b.fn={forEach:w.forEach,reduce:w.reduce,push:w.push,indexOf:w.indexOf,concat:w.concat,map:function(e){return b.map(this,function(t,n){return e.call(t,n,t)})},slice:function(){return b(E.apply(this,arguments))},ready:function(e){return U.test(x.readyState)?e(b):x.addEventListener("DOMContentLoaded",function(){e(b)},!1),this},get:function(e){return e===m?E.call(this):this[e]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return this.forEach(function(t,n){e.call(t,n,t)}),this},filter:function(e){return b([].filter.call(this,function(t){return R.matches(t,e)}))},add:function(e,t){return b(_(this.concat(b(e,t))))},is:function(e){return this.length>0&&R.matches(this[0],e)},not:function(t){var n=[];if(e(t)&&t.call!==m)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):r(t)&&e(t.item)?E.call(t):b(t);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return b(n)},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!t(e)?e:b(e)},last:function(){var e=this[this.length-1];return e&&!t(e)?e:b(e)},find:function(e){var t;return t=1==this.length?R.qsa(this[0],e):this.map(function(){return R.qsa(this,e)}),b(t)},closest:function(e,t){for(var n=this[0];n&&!R.matches(n,e);)n=n!==t&&n!==x&&n.parentNode;return b(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=b.map(n,function(e){return(e=e.parentNode)&&e!==x&&t.indexOf(e)<0?(t.push(e),e):void 0});return d(t,e)},parent:function(e){return d(_(this.pluck("parentNode")),e)},children:function(e){return d(this.map(function(){return E.call(this.children)}),e)},siblings:function(e){return d(this.map(function(e,t){return E.call(t.parentNode.children).filter(function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return this.map(function(){return this[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==S(this,"").getPropertyValue("display")&&(this.style.display=c(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return this.each(function(){b(this).wrapAll(b(e)[0].cloneNode(!1))})},wrapAll:function(e){return this[0]&&(b(this[0]).before(e=b(e)),e.append(this)),this},unwrap:function(){return this.parent().each(function(){b(this).replaceWith(b(this).children())}),this},clone:function(){return b(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(e){return(e===m?"none"==this.css("display"):e)?this.show():this.hide()},prev:function(){return b(this.pluck("previousElementSibling"))},next:function(){return b(this.pluck("nextElementSibling"))},html:function(e){return e===m?this.length>0?this[0].innerHTML:null:this.each(function(t){var n=this.innerHTML;b(this).empty().append(f(this,e,t,n))})},text:function(e){return e===m?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e})},attr:function(e,n){var i;return"string"==typeof e&&n===m?0==this.length||1!==this[0].nodeType?m:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(i=this[0].getAttribute(e))&&e in this[0]?this[0][e]:i:this.each(function(i){if(1===this.nodeType)if(t(e))for(v in e)this.setAttribute(v,e[v]);else this.setAttribute(e,f(this,n,i,this.getAttribute(e)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&this.removeAttribute(e)})},prop:function(e,t){return t===m?this[0]?this[0][e]:m:this.each(function(n){this[e]=f(this,t,n,this[e])})},data:function(e,t){var n=this.attr("data-"+s(e),t);return null!==n?n:m},val:function(e){return e===m?this.length>0?this[0].value:m:this.each(function(t){this.value=f(this,e,t,this.value)})},offset:function(){if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}},css:function(e,t){if(t===m&&"string"==typeof e)return 0==this.length?m:this[0].style[y(e)]||S(this[0],"").getPropertyValue(e);var n="";for(v in e)"string"==typeof e[v]&&""==e[v]?this.each(function(){this.style.removeProperty(s(v))}):n+=s(v)+":"+l(v,e[v])+";";return"string"==typeof e&&(""==t?this.each(function(){this.style.removeProperty(s(e))}):n=s(e)+":"+l(e,t)),this.each(function(){this.style.cssText+=";"+n})},index:function(e){return e?this.indexOf(b(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return this.length<1?!1:u(e).test(this[0].className)},addClass:function(e){return this.each(function(t){g=[];var n=this.className,i=f(this,e,t,n);i.split(/\s+/g).forEach(function(e){b(this).hasClass(e)||g.push(e)},this),g.length&&(this.className+=(n?" ":"")+g.join(" "))})},removeClass:function(e){return this.each(function(t){return e===m?this.className="":(g=this.className,f(this,e,t,g).split(/\s+/g).forEach(function(e){g=g.replace(u(e)," ")}),void(this.className=g.trim()))})},toggleClass:function(e,t){return this.each(function(n){var i=f(this,e,n,this.className);(t===m?!b(this).hasClass(i):t)?b(this).addClass(i):b(this).removeClass(i)})}},["width","height"].forEach(function(e){b.fn[e]=function(t){var n,i=e.replace(/./,function(e){return e[0].toUpperCase()});return t===m?this[0]==window?window["inner"+i]:this[0]==x?x.documentElement["offset"+i]:(n=this.offset())&&n[e]:this.each(function(n){var i=b(this);i.css(e,f(this,t,n,i[e]()))})}}),$.forEach(function(e,n){b.fn[e]=function(){var e=b.map(arguments,function(e){return t(e)?e:R.fragment(e)});if(e.length<1)return this;var i=this.length,r=i>1,a=2>n;return this.each(function(t,o){for(var s=0;s<e.length;s++){var u=e[a?e.length-s-1:s];h(u,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||window.eval.call(window,e.innerHTML)}),r&&i-1>t&&(u=u.cloneNode(!0)),p(n,o,u)}})},b.fn[n%2?e+"To":"insert"+(n?"Before":"After")]=function(t){return b(t)[e](this),this}}),R.Z.prototype=b.fn,R.camelize=y,R.uniq=_,b.zepto=R,b}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(e){function t(e){return e._zid||(e._zid=d++)}function n(e,n,a,o){if(n=i(n),n.ns)var s=r(n.ns);return(c[t(e)]||[]).filter(function(e){return e&&(!n.e||e.e==n.e)&&(!n.ns||s.test(e.ns))&&(!a||t(e.fn)===t(a))&&(!o||e.sel==o)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function r(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function a(t,n,i){e.isObject(t)?e.each(t,i):t.split(/\s/).forEach(function(e){i(e,n)})}function o(n,r,o,s,u,l){l=!!l;var d=t(n),f=c[d]||(c[d]=[]);a(r,o,function(t,r){var a=u&&u(r,t),o=a||r,c=function(e){var t=o.apply(n,[e].concat(e.data));return t===!1&&e.preventDefault(),t},d=e.extend(i(t),{fn:r,proxy:c,sel:s,del:a,i:f.length});f.push(d),n.addEventListener(d.e,c,l)})}function s(e,i,r,o){var s=t(e);a(i||"",r,function(t,i){n(e,t,i,o).forEach(function(t){delete c[s][t.i],e.removeEventListener(t.e,t.proxy,!1)})})}function u(t){var n=e.extend({originalEvent:t},t);return e.each(m,function(e,i){n[e]=function(){return this[i]=p,t[e].apply(t,arguments)},n[i]=h}),n}function l(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0,t.call(this)}}}var c=(e.zepto.qsa,{}),d=1,f={};f.click=f.mousedown=f.mouseup=f.mousemove="MouseEvents",e.event={add:o,remove:s},e.proxy=function(n,i){if(e.isFunction(n)){var r=function(){return n.apply(i,arguments)};return r._zid=t(n),r}if("string"==typeof i)return e.proxy(n[i],n);throw new TypeError("expected function")},e.fn.bind=function(e,t){return this.each(function(){o(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){s(this,e,t)})},e.fn.one=function(e,t){return this.each(function(n,i){o(this,e,t,null,function(e,t){return function(){var n=e.apply(i,arguments);return s(i,t,e),n}})})};var p=function(){return!0},h=function(){return!1},m={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,n,i){var r=!1;return("blur"==n||"focus"==n)&&(e.iswebkit?n="blur"==n?"focusout":"focus"==n?"focusin":n:r=!0),this.each(function(a,s){o(s,n,i,t,function(n){return function(i){var r,a=e(i.target).closest(t,s).get(0);return a?(r=e.extend(u(i),{currentTarget:a,liveFired:s}),n.apply(a,[r].concat([].slice.call(arguments,1)))):void 0}},r)})},e.fn.undelegate=function(e,t,n){return this.each(function(){s(this,t,n,e)})},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i){return void 0==n||e.isFunction(n)?this.bind(t,n):this.delegate(n,t,i)},e.fn.off=function(t,n,i){return void 0==n||e.isFunction(n)?this.unbind(t,n):this.undelegate(n,t,i)},e.fn.trigger=function(t,n){return"string"==typeof t&&(t=e.Event(t)),l(t),t.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)})},e.fn.triggerHandler=function(t,i){var r,a;return this.each(function(o,s){r=u("string"==typeof t?e.Event(t):t),r.data=i,r.target=s,e.each(n(s,t.type||t),function(e,t){return a=t.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),a},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){if(e)this.bind(t,e);else if(this.length)try{this.get(0)[t]()}catch(n){}return this}}),e.Event=function(e,t){var n=document.createEvent(f[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n}}(Zepto),function(e){function t(e){var t=this.os={},n=this.browser={},i=e.match(/WebKit\/([\d.]+)/),r=e.match(/(Android)\s+([\d.]+)/),a=e.match(/(iPad).*OS\s([\d_]+)/),o=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/),s=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=s&&e.match(/TouchPad/),l=e.match(/Kindle\/([\d.]+)/),c=e.match(/Silk\/([\d._]+)/),d=e.match(/(BlackBerry).*Version\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),r&&(t.android=!0,t.version=r[2]),o&&(t.ios=t.iphone=!0,t.version=o[2].replace(/_/g,".")),a&&(t.ios=t.ipad=!0,t.version=a[2].replace(/_/g,".")),s&&(t.webos=!0,t.version=s[2]),u&&(t.touchpad=!0),d&&(t.blackberry=!0,t.version=d[2]),l&&(t.kindle=!0,t.version=l[1]),c&&(n.silk=!0,n.version=c[1]),!c&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0)}t.call(e,navigator.userAgent),e.__detect=t}(Zepto),function(e,t){function n(e){return e.toLowerCase()}function i(e){return r?r+e:n(e)}var r,a="",o={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},s=window.document,u=s.createElement("div"),l=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,c={};e.each(o,function(e,i){return u.style[e+"TransitionProperty"]!==t?(a="-"+n(e)+"-",r=i,!1):void 0}),c[a+"transition-property"]=c[a+"transition-duration"]=c[a+"transition-timing-function"]=c[a+"animation-name"]=c[a+"animation-duration"]="",e.fx={off:r===t&&u.style.transitionProperty===t,cssPrefix:a,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},e.fn.animate=function(t,n,i,r){return e.isObject(n)&&(i=n.easing,r=n.complete,n=n.duration),n&&(n/=1e3),this.anim(t,n,i,r)},e.fn.anim=function(n,i,r,o){var s,u,d,f={},p=this,h=e.fx.transitionEnd;if(i===t&&(i=.4),e.fx.off&&(i=0),"string"==typeof n)f[a+"animation-name"]=n,f[a+"animation-duration"]=i+"s",h=e.fx.animationEnd;else{for(u in n)l.test(u)?(s||(s=[]),s.push(u+"("+n[u]+")")):f[u]=n[u];s&&(f[a+"transform"]=s.join(" ")),e.fx.off||"object"!=typeof n||(f[a+"transition-property"]=Object.keys(n).join(", "),f[a+"transition-duration"]=i+"s",f[a+"transition-timing-function"]=r||"linear")}return d=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(h,arguments.callee)}e(this).css(c),o&&o.call(this)},i>0&&this.bind(h,d),setTimeout(function(){p.css(f),0>=i&&setTimeout(function(){p.each(function(){d.call(this)})},0)},0),this},u=null}(Zepto),function(e){function t(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.defaultPrevented}function n(e,n,i,r){return e.global?t(n||g,i,r):void 0}function i(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function r(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function a(e,t){var i=t.context;return t.beforeSend.call(i,e,t)===!1||n(t,i,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,i,"ajaxSend",[e,t])}function o(e,t,i){var r=i.context,a="success";i.success.call(r,e,a,t),n(i,r,"ajaxSuccess",[t,i,e]),u(a,t,i)}function s(e,t,i,r){var a=r.context;r.error.call(a,i,t,e),n(r,a,"ajaxError",[i,r,e]),u(t,i,r)}function u(e,t,i){var a=i.context;i.complete.call(a,t,e),n(i,a,"ajaxComplete",[t,i]),r(i)}function l(){}function c(e){return e&&(e==x?"html":e==E?"json":_.test(e)?"script":w.test(e)&&"xml")||"text"}function d(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function f(t){b(t.data)&&(t.data=e.param(t.data)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=d(t.url,t.data))}function p(t,n,i,r){var a=e.isArray(n);e.each(n,function(n,o){r&&(n=i?r:r+"["+(a?"":n)+"]"),!r&&a?t.add(o.name,o.value):(i?e.isArray(o):b(o))?p(t,o,i,n):t.add(n,o)})}var h,m,v=0,b=e.isObject,g=window.document,y=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,_=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,E="application/json",x="text/html",k=/^\s*$/;e.active=0,e.ajaxJSONP=function(t){var n,i="jsonp"+ ++v,r=g.createElement("script"),a=function(){e(r).remove(),i in window&&(window[i]=l),u("abort",s,t)},s={abort:a};return t.error&&(r.onerror=function(){s.abort(),t.error()}),window[i]=function(a){clearTimeout(n),e(r).remove(),delete window[i],o(a,s,t)},f(t),r.src=t.url.replace(/=\?/,"="+i),e("head").append(r),t.timeout>0&&(n=setTimeout(function(){s.abort(),u("timeout",s,t)},t.timeout)),s},e.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:E,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0},e.ajax=function(t){var n=e.extend({},t||{});for(h in e.ajaxSettings)void 0===n[h]&&(n[h]=e.ajaxSettings[h]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host);var r=n.dataType,u=/=\?/.test(n.url);if("jsonp"==r||u)return u||(n.url=d(n.url,"callback=?")),e.ajaxJSONP(n);n.url||(n.url=window.location.toString()),f(n);var p,v=n.accepts[r],b={},g=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,y=e.ajaxSettings.xhr();n.crossDomain||(b["X-Requested-With"]="XMLHttpRequest"),v&&(b.Accept=v,v.indexOf(",")>-1&&(v=v.split(",",2)[0]),y.overrideMimeType&&y.overrideMimeType(v)),(n.contentType||n.data&&"GET"!=n.type.toUpperCase())&&(b["Content-Type"]=n.contentType||"application/x-www-form-urlencoded"),n.headers=e.extend(b,n.headers||{}),y.onreadystatechange=function(){if(4==y.readyState){clearTimeout(p);var e,t=!1;if(y.status>=200&&y.status<300||304==y.status||0==y.status&&"file:"==g){r=r||c(y.getResponseHeader("content-type")),e=y.responseText;try{"script"==r?(1,eval)(e):"xml"==r?e=y.responseXML:"json"==r&&(e=k.test(e)?null:JSON.parse(e))}catch(i){t=i}t?s(t,"parsererror",y,n):o(e,y,n)}else s(null,"error",y,n)}};var _="async"in n?n.async:!0;y.open(n.type,n.url,_);for(m in n.headers)y.setRequestHeader(m,n.headers[m]);return a(y,n)===!1?(y.abort(),!1):(n.timeout>0&&(p=setTimeout(function(){y.onreadystatechange=l,y.abort(),s(null,"timeout",y,n)},n.timeout)),y.send(n.data?n.data:null),y)},e.get=function(t,n){return e.ajax({url:t,success:n})},e.post=function(t,n,i,r){return e.isFunction(n)&&(r=r||i,i=n,n=null),e.ajax({type:"POST",url:t,data:n,success:i,dataType:r})},e.getJSON=function(t,n){return e.ajax({url:t,success:n,dataType:"json"})},e.fn.load=function(t,n){if(!this.length)return this;var i,r=this,a=t.split(/\s/);return a.length>1&&(t=a[0],i=a[1]),e.get(t,function(t){r.html(i?e(g.createElement("div")).html(t.replace(y,"")).find(i).html():t),n&&n.call(r)}),this};var T=encodeURIComponent;e.param=function(e,t){var n=[];return n.add=function(e,t){this.push(T(e)+"="+T(t))},p(n,e,t),n.join("&").replace("%20","+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t,n=[];return e(Array.prototype.slice.call(this.get(0).elements)).each(function(){t=e(this);var i=t.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:t.attr("name"),value:t.val()})}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(e){function t(e){return"tagName"in e?e:e.parentNode}function n(e,t,n,i){var r=Math.abs(e-t),a=Math.abs(n-i);return r>=a?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function i(){o=null,s.last&&(s.el.trigger("longTap"),s={})}function r(){o&&clearTimeout(o),o=null}var a,o,s={},u=750;e(document).ready(function(){var l,c;e(document.body).bind("touchstart",function(n){l=Date.now(),c=l-(s.last||l),s.el=e(t(n.touches[0].target)),a&&clearTimeout(a),s.x1=n.touches[0].pageX,s.y1=n.touches[0].pageY,c>0&&250>=c&&(s.isDoubleTap=!0),s.last=l,o=setTimeout(i,u)}).bind("touchmove",function(e){r(),s.x2=e.touches[0].pageX,s.y2=e.touches[0].pageY}).bind("touchend",function(e){r(),s.isDoubleTap?(s.el.trigger("doubleTap"),s={}):s.x2&&Math.abs(s.x1-s.x2)>30||s.y2&&Math.abs(s.y1-s.y2)>30?(s.el.trigger("swipe")&&s.el.trigger("swipe"+n(s.x1,s.x2,s.y1,s.y2)),s={}):"last"in s&&(s.el.trigger("tap"),a=setTimeout(function(){a=null,s.el.trigger("singleTap"),s={}},250))}).bind("touchcancel",function(){a&&clearTimeout(a),o&&clearTimeout(o),o=a=null,s={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}})}(Zepto),function(e){var t=function(e){var t=function(){};return t.prototype=e,new t},n=function(e,n){var i=t(n.prototype);i.constructor=e,e.prototype=i},i=function(e){n(this,e)},r=function(e){var t=this.prototype;for(var n in e)t[n]=e[n]},a=function(e){e.inherit_from=i,e.extend=r;for(var t=1,n=arguments.length;n>t;t++)e.inherit_from(arguments[t]);return e};a.instance_bind=function(e,t){return function(){return e.apply(t,arguments.length?arguments:[])}},e.Class=a}(self),function(){"undefined"!=typeof $&&($.fn.templeLeaf=function(e,t,n){switch(typeof e){case"string":case"number":var i=this,r=this,i=t?i.filter('[data-templ-html~="'+t+'"]'):i.filter("[data-templ-html]");if(i.length)return i.empty().html(e),void(n&&i.children().temple(n));t&&(r=r.filter('[data-templ~="'+t+'"]')),r.each(function(t,n){switch(n.nodeName){case"INPUT":case"TEXTAREA":$(n).val(e);break;default:$(n).text(e)}});break;case"object":case"function":null===e?this.filter('[data-templ~="'+t+'"]').remove():this.filter('[data-templ~="'+t+'"]').attr(e.attr,e.value)}return this},$.fn.temple=function(e,t){var n,i=this.filter("[data-templ], [data-templ-html]").add(this.find("[data-templ], [data-templ-html]"));for(n in e){var r=e[n];if($.isArray(r)){var a=i.filter(['[data-templ~="'+n+'"]','[data-templ-html~="'+n+'"]'].join());a.length&&("undefined"!=typeof t&&t.length||(t=a.children().eq(0)),t.length&&(t=t.clone(),a.empty(),a.append(t.hide()),$.each(r,function(e,n){var i=t.clone().show();"string"==typeof n&&i.templeLeaf(n),i.temple(n),a.append(i)})))}else{var o=$.extend({},e);delete o[n],i.templeLeaf(r,n,o)}}return this})}(),function(e,t,n){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e[n]=t()}(this,function(){"use strict";var e={},t=function(t){return!!e[t]},n=function(n,i){if(t(n))for(var r=e[n].slice(),a=0;a<r.length;a++)i(r[a],r,a)},i=function(n,i){t(n)||(e[n]=[]),i&&i.sticky&&(e[n].sticky=!0),i&&i.data&&(e[n].data=i.data)},r=function(e,t){t&&t.sticky&&i(e,t),n(e,function(n){o(e,n,t&&t.data)})},a=function(t,n){i(t),e[t].push(n),e[t].sticky&&o(t,n,e[t].data)},o=function(e,t,n){var i=[{type:e}].concat(n);t.apply(this,i)},s=function(t,i){n(t,function(n,r,a){n===i&&e[t].splice(a,1)})},u=function(t){delete e[t]};return{publish:r,subscribe:a,unsubscribe:s,unsubscribeAll:u,__events__:e}},"E"),$.fn.valueBind=function(e){var t=this,n=function(){t.val(e)};return e.subscribe(n),t.length&&t.is("input")&&t.val(e).change(function(){e.set(t.val())}).blur(n),this},E.bind=E.subscribe,E.unbind=E.unsubscribe;var F={};F.to_time=function(e){var t=Math.floor(e/3600);t&&(e-=3600*t);var n=Math.floor(e/60);n&&(e-=60*n);var e=e,i="";return t&&(i+=t+":"),i+=(10>n?"0":"")+n+":"+(10>e?"0":"")+e},F.pluralize=function(e,t,n){n=n||"s",t=t||1;var i=e;return t>1&&(i+=n),i},F.capitalizeFirst=function(e){var t=e.charAt(0).toUpperCase();return t+e.substr(1)},F.minutes=function(e){return Math.ceil(e/60)},F.ordinal=function(e){var t=e%10,n="th",i=["th","st","nd","rd"];return 4>t&&(n=i[t]),e+n},F.format_thousands=function(e,t){var n=Math.floor(e),i=n+"",r=i.length,a=r%3||3,o=i.substr(0,a),s=i.substr(a);if(t){var u=s.substr(s.length-3,3);"000"===u&&(s=s.substring(0,s.length-3)+"k")}else s=s.replace(/(\d{3})/g,",$1");return o+s},F.wait=function(e,t){var n=n||100,i=setInterval(function(){e()?(clearInterval(i),t()):F.wait(e,t,n)},n)},F.get_location_object=function(){function e(e){var t=e.split("=");i[t[0]]=t[1]}var t,n,i={};try{t=decodeURIComponent(location.search.substr(1))}catch(r){t=""}if(t)if(t.indexOf("&")>=0){n=t.split("&");for(var a=0;n[a];)e(n[a]),a++}else e(t);return i},F.run_once=function(e,t){"function"!=typeof e||e.run_before||(e(t),e.run_before=!0)},F.iter=function(){var e=0;return function(){return this[e++]}},F.textOverflow=function(e,t){t=t||48;var n=e.substr(0,t);return e!==n&&(n+="..."),n},F.changeNotifier=function(){var e,t=function(t){var n=!(t==e);return e=t,n};return t},F.payload=function(e,t){t=t||Math.max(2,Math.round(10*Math.random()));var n=Array.prototype.map.call(e,function(e){return e.charCodeAt(0)}).map(function(e){return e%t});return n.push((new Date).getFullYear()%t),{"var":t,payload:MD5(n.join(""))}},F.fromJSON=function(e){var t=null;try{t=JSON.parse(e)}catch(n){}return t};var UTIL={rf:function(){return!1},format:{time:function(e){return isFinite(e)?F.to_time(e/1e3):"&infin;"}}};F.rf=UTIL.rf,F.format=UTIL.format,Object.defineProperty(Object.prototype,"filter",{value:function(e){var t={};for(var n in this)n in e&&e[n]==this[n]&&(t[n]=this[n]);return t}}),F.template=function(e,t){var n=0;return t&&t.length?e.replace(/\{\d+\}/g,function(e){var i=t[n];return i?(n+=1,i):e}):e},F.findMultiplier=function(e){var t=e.map(function(e,t,n){return 0==t?0:e/n[t-1]}).splice(1);return t.reduce(function(e,t){return e+t},0)/t.length},F.roundToNearestMultipleOf=function(e,t){var n=Math.floor(e/t)*t,i=n+t;return Math.abs(e-n)<Math.abs(e-i)?n:i},F.findRoundDivisor=function(e){for(var t=(e+"").length,n=1+Array(t).join("0"),i=n;i>1;){if(!(e%i))return+i;i/=10}return n},F.px=function(e){return String(e)+"px"},$.fn.dataBind=function(e){return this.each(function(){$(this).find("[data-bind]").each(function(){var t=$(this),n=e[t.attr("data-bind")];n instanceof Value&&n.subscribe(function(e){t.html(e.get())})&&(n=n.get()),t.html(n)})}),this},function(e,t,n){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e[n]=t()}(this,function(){"use strict";function e(){}function t(){return"object"==typeof chrome&&"storage"in chrome}function n(){return"object"==typeof runtime&&runtime.flash}function i(){return"object"==typeof cordova&&"ios"===cordova.platformId}function r(){
var e=!1;if("function"==typeof require){var t=require("./package");"object"==typeof t&&"string"==typeof t.name&&(e=-1!==t.name.indexOf("electron"))}return e}function a(){return!(t()||n()||i()||r())&&"object"==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("mozilla")>=0}function o(e){return"undefined"==typeof e}function s(e){return"function"==typeof e}var u={storage:{get:e,set:e,remove:e,has:e},detect:{isChromeExtension:t(),isAdobeAir:n(),isIOS:i(),isElectron:r(),isWeb:a(),name:function(){var e="";return t()&&(e="chrome"),n()&&(e="air"),i()&&(e="ios"),r()&&(e="electron"),a()&&(e="web"),e}}},l={storage:function(){if(!t()&&r()&&"object"==typeof localStorage){var e=localStorage;e.getItem&&(u.storage.get=function(t,n){var i=e.getItem(t);return null===i&&(i=void 0),n&&n(i),i}),e.setItem&&(u.storage.set=function(t,n,i){e.setItem(t,n),i&&i()}),e.removeItem&&(u.storage.remove=function(t,n){e.removeItem(t),n&&n()}),"object"==typeof e&&(u.storage.has=function(t){return t in e})}if(t()&&"object"==typeof chrome.storage&&"object"==typeof chrome.storage.local){var e=chrome.storage.local;e.get&&(u.storage.get=function(t,n){e.get(t,function(e){n&&n(e[t])})}),e.set&&(u.storage.set=function(t,n,i){var r={};r[t]=n,e.set(r,i)}),e.remove&&(u.storage.remove=function(t,n){e.remove(t,n)})}if(n()&&runtime.flash.data&&runtime.flash.data.EncryptedLocalStore){var e=runtime.flash.data.EncryptedLocalStore;e.getItem&&(u.storage.get=function(t,n){if(!o(t)){var i;try{var r=e.getItem(t)}catch(a){}return r&&(i=r.readUTFBytes(r.length)),s(n)&&n(i),i}}),e.setItem&&runtime.flash.utils&&runtime.flash.utils.ByteArray&&(u.storage.set=function(t,n,i){if(!o(t)&&!o(n)){var r=new runtime.flash.utils.ByteArray;r.writeUTFBytes(n),e.setItem(t,r),s(i)&&i()}}),e.removeItem&&(u.storage.remove=function(t,n){if(!o(t)){try{e.removeItem(t)}catch(i){}s(n)&&n()}})}}};for(var c in u)c in l&&l[c]();return u.storage.getItems=function(e,t){var n=[],i=function(){n.length===e.length&&"function"==typeof t&&t.apply(null,n)};e.forEach(function(e){u.storage.get(e,function(e){n.push(e),i()})})},u.storage.setItems=function(e,t){var n=0,i=function(){n===e.length&&"function"==typeof t&&t()};Object.keys(e).forEach(function(t){var r=e[t];u.storage.set(t,r,function(){n++,i()})})},u.storage.removeItems=function(e,t){var n=0,i=function(){n===e.length&&"function"==typeof t&&t()};e.forEach(function(e){u.storage.remove(e,function(){n++,i()})})},u},"Platform");var PLATFORM=new function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function t(){return(e()+e()+"-"+e()+"-4"+e().substr(0,3)+"-"+e()+"-"+e()+e()+e()).toLowerCase()}var n,i={browser:{version:{get:function(){return""}},storage:{get:function(e){},set:function(e,t){},remove:function(e){}},test:function(){return"XMLHttpRequest"in top},debug:{log:function(){console.log.apply(console,arguments)}}},AIR:{version:{get:function(){var e=air.NativeApplication.nativeApplication.applicationDescriptor,t=new DOMParser,n=t.parseFromString(e,"text/xml"),i=n.getElementsByTagName("version")[0],r=n.getElementsByTagName("versionNumber")[0],a="0.0.0";return i&&i.textContent&&(a=i.textContent),r&&r.textContent&&(a=r.textContent),a}},storage:{get:function(e){var t,n;try{n=air.EncryptedLocalStore.getItem(e)}catch(i){}return n&&(t=n.readUTFBytes(n.length)),t},set:function(e,t){var n=new air.ByteArray;n.writeUTFBytes(t);try{air.EncryptedLocalStore.setItem(e,n)}catch(i){}},remove:function(e){try{return air.EncryptedLocalStore.removeItem(e)}catch(t){}}},test:function(){return i.browser.test()&&"runtime"in top},debug:{log:function(){air.trace.apply(air,[].slice.call(arguments))}},facebook:{share:function(e){var t="134726936625607",n="We have the winner!",i="https://www.facebook.com/pages/The-Poker-Timer/115811378458214",r=e,a="http://www.thepokertimer.com/media/external/the-poker-timer-facebook.png",o="http://facebook.com",s=encodeURI("https://www.facebook.com/dialog/feed?app_id="+t+"&link="+i+"&picture="+a+"&name="+n+"&description="+r+"&redirect_uri="+o),u=new air.URLRequest(s);try{air.navigateToURL(u,"_blank")}catch(l){}},authorize:function(){var e=new air.Rectangle(100,100,400,300),t=air.HTMLLoader.createRootWindow(!0,new air.NativeWindowInitOptions,!0,e);__sAppId="134726936625607",__sRedirectUri="http://www.thepokertimer.com",__sScope="email,read_friendlists,create_event,publish_actions",t.load(new air.URLRequest("https://graph.facebook.com/oauth/authorize?client_id="+__sAppId+"&redirect_uri="+__sRedirectUri+"&type=user_agent&display=popup&scope="+__sScope))}},frame:{create:function(e,t){e=e||1,t=t||1;var n=new air.HTMLLoader;return n.paintsDefaultBackground=!1,n.navigateInSystemBrowser=!0,n.width=e,n.height=e,n},append:function(e){var t=window.nativeWindow.stage;return t.addChild(e),t.numChildren-1},remove:function(e){var t=window.nativeWindow.stage;t.removeChildAt(e)}},ads:{},DOM:{},intercom:{js:'<html><head></head><body><script id="IntercomSettingsScriptTag">window.intercomSettings = {email:"{0}",created_at:{1},app_id:"cd3f4236cf426687f7c0aac6af5ac5308d20e282",custom_data:{version:"{2}",licence:"{3}"}}</script><script>var s = document.createElement(\'script\');s.type = \'text/javascript\'; s.async = true;s.src = \'https://api.intercom.io/api/js/library.js\';var x = document.getElementsByTagName(\'script\')[0];x.parentNode.insertBefore(s, x);</script></body></html>',log:function(e,t,n,i){var r=F.template(this.js,[e,t,n,i]),a=PLATFORM.frame.create();a.loadString(r)}}},chrome:{version:{get:function(){return chrome.runtime.getManifest().version}},storage:{get:function(e){},set:function(e,t){},remove:function(e){}},test:function(){return"object"==typeof chrome&&"storage"in chrome},debug:{log:function(){console.log.apply(console,arguments)}},facebook:{share:function(e){var t="134726936625607",n="We have the winner!",i="https://www.facebook.com/pages/The-Poker-Timer/115811378458214",r=e,a="http://www.thepokertimer.com/media/external/the-poker-timer-facebook.png",o="http://facebook.com";window.open(encodeURI("https://www.facebook.com/dialog/feed?app_id="+t+"&link="+i+"&picture="+a+"&name="+n+"&description="+r+"&redirect_uri="+o))},authorize:function(){__sAppId="134726936625607",__sRedirectUri="http://www.thepokertimer.com",__sScope="email,read_friendlists,create_event,publish_actions",window.open("https://graph.facebook.com/oauth/authorize?client_id="+__sAppId+"&redirect_uri="+__sRedirectUri+"&type=user_agent&display=popup&scope="+__sScope)}},frame:{create:function(e,t){e=e||1,t=t||1;var n=document.createElement("iframe");return n.width=e,n.height=t,n},append:function(e,n){return n=n||document.body,e.id="iframe_"+t(),n.appendChild(e),e.id},remove:function(e){var t=document.getElementById(e);t.parentNode.removeChild(t)}},ads:{},DOM:{}},electron:{version:{get:function(){return require("./package").version}},test:function(){var e=!1;if("function"==typeof require){var t=require("./package");"object"==typeof t&&"string"==typeof t.name&&(e=-1!==t.name.indexOf("electron"))}return e},facebook:{_appId:"134726936625607",_openBrowser:function(e){var t=require("shell");return t.openExternal(e)},_getShareUrl:function(e){var t="We have the winner!",n="https://www.facebook.com/pages/The-Poker-Timer/115811378458214",i="http://www.thepokertimer.com/media/external/the-poker-timer-facebook.png",r="http://facebook.com";return encodeURI("https://www.facebook.com/dialog/feed?app_id="+this._appId+"&link="+n+"&picture="+i+"&name="+t+"&description="+e+"&redirect_uri="+r)},_getAuthUrl:function(){return __sRedirectUri="http://www.thepokertimer.com",__sScope="email,read_friendlists,create_event,publish_actions","https://graph.facebook.com/oauth/authorize?client_id="+this._appId+"&redirect_uri="+__sRedirectUri+"&type=user_agent&display=popup&scope="+__sScope},share:function(e){return this._openBrowser(this._getShareUrl(e))},authorize:function(){return this._openBrowser(this._getAuthUrl())}}}};i.electron.frame=i.chrome.frame,i.electron.browser={open:i.electron.facebook._openBrowser};for(var r in i)i[r].test()&&(n=i[r]);return n};Value.prototype.formatters={quantity:{symbol:"",format_thousands:!0},money:{symbol:"$",position:"before",format_thousands:!0,decimal_digits:2}};var SEC=1e3,MIN=60*SEC;$(function(){"undefined"!=typeof FastClick&&FastClick.attach(document.body)});var UI={VIEW:{initials:function(){E.publish("ui.initials")}},PERM:{maximizable:!1},list:function(e,t){var n=$("<ul/>");for(var i in e){var r=$("<li/>").data("value",e[i]).data("key",i);n.append(t(e[i],i,r))}return n.children("li")},message:function(){"use strict";var e,t,n=$("#chrome_overlay"),i=n.find(".message"),r=function(){return n.removeClass("active_modal").removeClass("active_notification"),$("body").removeClass("modal-on"),i.removeAttr("id"),i.find(".main").empty(),i.find("button").text("OK"),!1};return i.find(".close, .cancel").click(function(){r(),t&&t()}),$(".message button").click(function(){e?e()&&r():r()}),{show:function(n,i,r,a){if(e=a,1===arguments.length&&"object"==typeof arguments[0]){var o=arguments[0],n=o.text,i=o.title,r=o.contents,s=o.button,u=o.id;e=o.callback,t=o.afterCancel}var l={text:n||"",title:i||"",button:s||"OK"},c=$("#chrome_overlay").find(".message").eq(0);return c.dataBind(l),u&&c.attr("id",u),r&&c.find(".main").append(r),$("#chrome_overlay").addClass("active_modal"),$("body").addClass("modal-on"),E.publish("overlay.show"),$("#chrome_overlay").find(".message")},hide:r}}(),confirm_delete:function(){return confirm("Are you sure you want to delete it?")},async:function(e){setTimeout(e,1)},goto_view:function(e){$("#app").attr("class",e)},Progress:function(e){var t=$(e),n=t.parent(),i=7,r=0;this.update=function(e){isundef(e)&&(e=r),r=e;var a=n.width();width=~~(e*a),width-=width%i,1===e&&width<a&&(width+=i),t.css("width",width+"px")},this.reset_width=function(){n.css("width","");var e=n.width();e-=e%i,e&&n.css("width",e+"px")}},Ticker:function(e){var t=$(e);this.write=function(e){var n=t.find(".line.active"),i=t.find(".line.prev"),r=t.find(".line.next");r.text(e),n.removeClass("active").addClass("prev"),i.removeClass("prev").addClass("next"),r.removeClass("next").addClass("active")}},doResize:function(e,t){e.css({fontSize:t+"pt",lineHeight:t+"px",letterSpacing:t>150?t*-.03+"px":0})},adjustTextSize:function(e){if(!isWeb){var t=$(e),n=.9*t.height(),i=.9*t.width(),r=.75*n,a=t.clone(!0);if(a.attr("id",e.substr(1)+"-clone"),a.height(n),UI.doResize(a,r),a.appendTo("body"),i<a.width()){var o=i/a.width();r*=o}a.remove(),UI.doResize(t,r)}},notify:function(e,t,n){if(e&&t){var i=$("#chrome_overlay");i.find(".notification").dataBind({title:e,text:t}),i.addClass("active_notification"),setTimeout(function(){i.removeClass("active_notification")},n||3e3)}},enforceMaxWindowSize:function(){if(Platform.detect.isChromeExtension){var e=chrome.app.window.current();e.onBoundsChanged.addListener(UI._chromeMaxWindowSizeHandler)}},removeMaxWindowSizeEnforement:function(){if(Platform.detect.isChromeExtension){var e=chrome.app.window.current();e.onBoundsChanged.removeListener(UI._chromeMaxWindowSizeHandler)}},_chromeMaxWindowSizeHandler:function(){var e=chrome.app.window.current(),t=e.getBounds(),n=UI.maxFreeAppWinSize;(t.width>n.width||t.height>n.height)&&(e.resizeTo(n.width,n.height),e.moveTo(t.left,t.top),E.publish("ui.window.size.max"))},maxFreeAppWinSize:{width:1e3,height:800}},Browser={open:function(e){if(Platform.detect.isAdobeAir){var t=new air.URLRequest(e);try{air.navigateToURL(t)}catch(n){}}}},isAdobeAir=Platform.detect.isAdobeAir,isChromeExtension=Platform.detect.isChromeExtension,isIOS=Platform.detect.isIOS,isElectron=Platform.detect.isElectron,isWeb=Platform.detect.isWeb,files=["end_of_round","end_of_break","1_minute_round","1_minute_break","5_minute_round","5_minute_break","10_minute_round","10_minute_break","add_on","re_buy","knocked_out","play_poker","we_have_a_winner"],Sound={dir:"sound",extension:"mp3",files:isWeb?["play_poker","10_sec_beep_countdown"]:files,load:function(){if("undefined"!=typeof air&&air.URLRequest&&air.Sound&&this.files.forEach(function(e){var t=new air.URLRequest(Sound.dir+"/"+e+"."+Sound.extension),n=new air.Sound;n.load(t),Sound.sounds[e]=n}),"undefined"==typeof chrome||isIOS||this.files.forEach(function(e){var t=new Audio;if(chrome.runtime&&"function"==typeof chrome.runtime.getURL)var n=chrome.runtime.getURL(Sound.dir+"/"+e+"."+Sound.extension);else var n=Sound.dir+"/"+e+"."+Sound.extension;t.src=n,Sound.sounds[e]=t,t.load()}),isIOS&&this.files.forEach(function(e){var t=new window.webkitAudioContext,n=new XMLHttpRequest;n.open("GET",Sound.dir+"/"+e+".m4a",!0),n.responseType="arraybuffer",n.onload=function(){t.decodeAudioData(n.response,function(n){Sound.sounds[e]={buffer:n,audioCtx:t}},function(e){})},n.send()}),isElectron){var e=100,t=new AudioContext;this.files.forEach(function(n,i){setTimeout(function(){var e=new XMLHttpRequest;e.open("GET",Sound.dir+"/"+n+".mp3",!0),e.responseType="arraybuffer",e.onload=function(){t.decodeAudioData(e.response,function(e){Sound.sounds[n]={buffer:e,audioCtx:t}},function(e){})},e.send()},e*i)})}},sounds:{},transform:"undefined"!=typeof air?new air.SoundTransform(.7,0):null,timerID:0,play:function(e,t){if("undefined"!=typeof air)if(Sound.nowPlaying)t||Sound.playQueue.push(e);else{Sound.nowPlaying=e;var n=Sound.sounds[e];n.addEventListener(air.IOErrorEvent.IO_ERROR,function(){});var i=n.play();i.addEventListener(air.Event.SOUND_COMPLETE,function(){Sound.nowPlaying=null,Sound.playQueue.length&&Sound.play(Sound.playQueue.shift(),1)}),i.soundTransform=Sound.transform}if("undefined"!=typeof chrome&&!isIOS){var r=Sound.sounds[e];r&&r.readyState&&r.play()}if(isIOS||isElectron){var a=Sound.sounds[e],o=a.audioCtx.createBufferSource();o.buffer=a.buffer,o.connect(a.audioCtx.destination),Sound.stop(),Sound.nowPlaying=o,o.start(0)}},stop:function(){(isIOS||isElectron)&&Sound.nowPlaying&&Sound.nowPlaying.stop(0)},clearQueue:function(){Sound.playQueue=[]},nowPlaying:null,mute:function(){Sound.transform=new air.SoundTransform(0,0)},playQueue:[],unmute:function(){Sound.transform=new air.SoundTransform(1,1)}};Sound.load(),UI.progress=new UI.Progress("#progress-bar"),UI.ticker=new UI.Ticker("#ticker"),$("ul.selectable li").live("mousedown",function(e){$(this).addClass("selected").siblings().removeClass("selected")}),E.bind("UI.game.layout.resize",resizeUIElems),E.bind("game",resizeUIElems),$(window).resize(resizeUIElems);var Dialog={new_preset:function(e){var t=new Date,n=(t+"").split(/\s/).splice(0,5),i="New Settings ("+n[0]+", "+n[1]+" "+n[2]+" "+n[3]+", "+n[4]+")",r=$("<input/>").val(e.settings?e.settings.preset_name:i);UI.message.show("Save tournament as","Choose a name for your tournament",r,function(){var t=r.val(),n=PRESETS.key_from_title(t);return t?void(PRESETS.get(n)?setTimeout(function(){UI.message.show("Tournament already exists","Do you want to overwrite "+t+"?","",function(){PRESETS.save(n,e.settings,!0)})},500):(e.settings?(e.settings.duplicate(),e.settings.set_name(t)):e.create_settings(t,n),PRESETS.save(n,e.settings))):void setTimeout(function(){UI.message.show("Name cannot be empty","",UTIL.rf)},500)})}};isAdobeAir&&nativeWindow.activate(),isIOS?$("body").addClass("ios"):isChromeExtension&&$("body").addClass("chrome-extension"),isElectron&&$("body").addClass("electron"),E.bind("ui.permissions",function(e,t){function n(){displayMaximizeNotification(),a.setFullScreen(!1)}if(UI.PERM=t,UI.PERM.maximizable){isAdobeAir&&(nativeWindow.maxSize=new air.Point(4095,4095)),$("body").addClass("maximizable"),document.title+="";var i=!1;if(Platform.detect.isElectron){var r=require("remote").BrowserWindow,a=r.getFocusedWindow();a&&a.setResizable(!0)}$("#fullscreen-toggle").click(function(){return i?(isAdobeAir&&(window.nativeWindow.stage.displayState=runtime.flash.display.StageDisplayState.NORMAL),$("body").removeClass("fullscreen")):(isAdobeAir&&(window.nativeWindow.stage.displayState=runtime.flash.display.StageDisplayState.FULL_SCREEN_INTERACTIVE),$("body").addClass("fullscreen")),i=!i,!1})}else{if(isAdobeAir&&(window.nativeWindow.addEventListener("displayStateChanging",function(e){displayMaximizeNotification(),"maximized"==e.afterDisplayState&&"normal"==e.beforeDisplayState&&e.preventDefault()}),window.nativeWindow.addEventListener("displayStateChange",function(e){displayMaximizeNotification(),"maximized"==e.afterDisplayState&&"normal"==e.beforeDisplayState&&setTimeout(function(){window.nativeWindow.width>1e3&&(window.nativeWindow.width=1e3),window.nativeWindow.height>800&&(window.nativeWindow.height=800)},10)}),window.nativeWindow.addEventListener("resizing",function(e){displayMaximizeNotification(),(e.afterBounds.width>=990||e.afterBounds.height>=792)&&(e.afterBounds.width>e.beforeBounds.width||e.afterBounds.height>e.beforeBounds.height)&&e.preventDefault()})),isChromeExtension){var o=chrome.app.window.current();o.onBoundsChanged.addListener(function(){var e=o.getBounds();(e.width>1e3||e.height>800)&&(o.resizeTo(1e3,800),o.moveTo(e.left,e.top),displayMaximizeNotification())})}if(Platform.detect.isElectron){var r=require("remote").BrowserWindow,a=r.getFocusedWindow();a&&(a.on("resize",n),a.on("maximize",n),a.on("enter-full-screen",n))}document.title+=" Free",$("#fullscreen-toggle").click(function(){return displayMaximizeNotification(),!1}),isAdobeAir&&(window.nativeWindow.width>1e3&&(window.nativeWindow.width=1e3),window.nativeWindow.height>800&&(window.nativeWindow.height=800))}}),$("body").keypress(function(e){return $(e.target).is("body")&&32===e.keyCode?($("#"+$("#app").attr("class")+" .process_actions button").trigger("click"),!1):void 0}),Platform.detect.isIOS&&($(document).on("focus","input",function(e){e.target.scrollIntoViewIfNeeded()}),$("#app").on("swipeLeft",function(){$("#"+$("#app").attr("class")+" .process_actions button").trigger("click")})),$("a.collapse").click(function(){var e=$(this),t=$("#left_sect");$(e.attr("href")).toggleClass("collapsed");var n={left:"right",right:"left",up:"down",down:"up"},i=["right","down"];i.forEach(function(i){e.is("."+i)&&t.addClass("collapsed_"+i),e.is("."+n[i])&&t.removeClass("collapsed_"+i)});for(var r in n)if(e.is("."+r)){e.removeClass(r).addClass(n[r]);break}return E.publish("UI.game.layout.resize"),!1}),$("ol.settings_nav a").click(function(){var e=$(this).attr("href").substr(1);return E.bind("view.unload",function(t,n){n&&UI.goto_view(e)}),E.publish("request.view.unload",{data:[{current:$("#app").attr("class"),next:e}]}),!1}),$.fn.inputValueBind=function(e){function t(e){n.val(e.get())}var n=this;return this.is("input")&&e instanceof Value&&(t(e),e.subscribe(t),n.change(function(){var t=n.val();e.set(t),setTimeout(function(){var t=e.get();t!==n.val()&&n.val(t)},1)})),this},$.fn.inputsPartsMerge=function(e){for(var t in e)if(e[t]instanceof Value){var n=this.find("input[name="+t+"]");n[0]&&n.inputValueBind(e[t])}return this},function(){function e(){$(window).on("click","a.browser",function(){var e=$(this).attr("href");if(e.indexOf("thepokertimer.com")>=0){var t="?";e.indexOf(t)>=0&&(t="&"),e+=t+"from_tpt=1"}return Browser.open(e),!1})}function t(){$("a").each(function(e,t){t.href.indexOf("http")>=0&&t.setAttribute("target","_blank")})}function n(){const e=require("shell");var t=function(e){return"A"===e.nodeName&&e.href&&0===e.href.indexOf("http")},n=function(e){for(var n=3;e.parentNode&&n--;){if(t(e.parentNode))return e.parentNode;e=e.parentNode}};document.addEventListener("click",function(i){if(t(i.target))var r=i.target.href;else{var a=n(i.target);if(a)var r=a.href}return r&&i.preventDefault(),r?(i.preventDefault(),e.openExternal(r)):void 0},!0)}function i(){Platform.detect.isAdobeAir&&(e(),e=function(){}),Platform.detect.isChromeExtension&&t(),Platform.detect.isElectron&&n()}var r=[];$.fn.dataObj=function(e,t){var n,i=this;if(e&&t){var a;r.forEach(function(e){e[0]===i[0]&&(a=e)}),a||(a=[i[0]]);var o={};return o[e]=t,a.push(o),r.push(a),i}return r.forEach(function(t){return t[0]===i[0]?e&&t[1].hasOwnProperty(e)?void(n=t[1][e]):void(n=t[1]):void 0}),n},$.fn.scrollToAndFlash=function(e){var t=this;return e=e||"newly-added",this[0].scrollIntoView(),t.addClass("transition-bg-change").addClass(e),setTimeout(function(){t.removeClass(e)},500),this},UI.forceRedraw=function(e){if(Platform.detect.isIOS){var t=parseInt($(e).height());e.style.height=t+"px"}},i(),Platform.detect.isIOS&&$(document).on("focus","input",function(e){e.target.scrollIntoViewIfNeeded()}),E.bind("overlay.show",i)}(),E.bind("TPT.user.authentication.success",function(e,t,n){$("#app").dataBind({authenticated_username:t})});var Origin={conf:{endpoint:{protocol:"http",domain:"www.thepokertimer.com",dir:"api",method:{auth:"authenticate",ads:"ads"},apiVersion:3}},getEndpointUrl:function(e){var t=this.conf.endpoint;return[t.protocol,[t.domain,t.dir,t.method[e]].join("/")].join("://")},getAuthenticateData:function(e){return this.payload=F.payload(e),{version:TPT.version,"var":this.payload["var"],payload:this.payload.payload,api_version:this.conf.endpoint.apiVersion,platform:Platform.detect.name()}},getLastAuthenticationPayload:function(){return this.payload},authenticate:function(e){var t=$.extend({url:this.getEndpointUrl("auth"),type:"POST"},e);t.data=$.extend(t.data,this.getAuthenticateData(t.data.username)),$.ajax(t)},isAuthenticated:function(e,t){return""!=this.getAutenticatedLicence(e,t)},getAutenticatedLicence:function(e,t){var n="",i=F.fromJSON(e),r=this.getLastAuthenticationPayload();return i&&(F.payload(t+"premium",r["var"]).payload==i.payload&&(n="premium"),F.payload(t+"free",r["var"]).payload==i.payload&&(n="free")),n},getServerSentEventData:function(e){var t=null,n=F.fromJSON(e);if(n){if(!n.event_name)return t;t={eventName:n.event_name,data:null},void 0!=n.event_data&&(t.data=n.event_data)}return t},getUserData:function(e){var t={},n=F.fromJSON(e);if(n)for(var i in n)0==i.indexOf("user_")&&(t[i.replace("user_","")]=n[i]);return t},fetchAds:function(e){var t=$.extend({url:this.getEndpointUrl("ads"),type:"GET"},e);$.ajax(t)}},TPT=new function(){var e=this,t=PLATFORM.version.get();e.__defineGetter__("version",function(){return t}),setTimeout(function(){if("object"==typeof runtime&&"object"==typeof runtime.air&&"object"==typeof runtime.air.update&&"function"==typeof runtime.air.update.ApplicationUpdaterUI&&"object"==typeof air&&"function"==typeof air.File){var e=new runtime.air.update.ApplicationUpdaterUI;e.configurationFile=new air.File("app:/updateConfig.xml"),e.initialize()}},100)},USER=new function(){var e,t,n,i,r=this,a=!1,o="free",s=!0,u=function(e,t,n,i){a=!0,Platform.storage.setItems({login:e,password:t,licence:n}),E.publish("TPT.user.authentication.success",{data:[e,n],sticky:!0}),i?c(e,t,n):d()},l=function(){E.publish("TPT.user.authentication.failure"),d()},c=function(){Platform.storage.set("remember_login","true")},d=function(){Platform.storage.removeItems(["login","password","licence"])},f=function(e,t,n,i){s?Platform.storage.getItems(["login","password","licence"],function(r,a,o){"premium"==o&&r==e&&a==t?(u(e,t,o,{},n),i.success&&i.success()):i.error&&i.error()}):i.error&&i.error()},p=function(e,t,n){function r(){i&&(s&&f(e,t,n,{error:function(){E.publish("TPT.login.aborted",{data:[e]})}}),i=!1,clearTimeout(o))}if(i)E.publish("TPT.login.waiting_for_response");else if(e&&t){i=!0;var a={data:{username:e,password:t},success:function(r){var a=Origin.getAutenticatedLicence(r,e),s=Origin.getServerSentEventData(r);s&&(args={data:s.data,sticky:!0},E.publish(s.eventName,args)),a?u(e,t,a,n):l(),i=!1,clearTimeout(o)},complete:r,error:r};Origin.authenticate(a);var o=setTimeout(r,7e3)}else E.publish("TPT.login.incorrect_input")};Platform.storage.getItems(["login","password","remember_login"],function(i,r,a){e=i,t=r,n=a,a&&E.publish("TPT.user.login.saved",{data:[e,t],sticky:!0})}),E.bind("TPT.user.authentication.success",function(t,n,i){e=n}),r.__defineGetter__("username",function(){return e}),r.__defineGetter__("password",function(){return t}),r.__defineGetter__("licence",function(){return o}),E.bind("TPT.user.login.input",function(e,t,n,i){p(t,n,i)})};Platform.storage.get=function(e,t){t&&t('{"default":{"meta":{"name":"Default"},"parts":[{"type":"round","blinds_small":10,"blinds_big":20,"ante":0,"duration":600000},{"type":"round","blinds_small":20,"blinds_big":40,"ante":0,"duration":600000},{"type":"round","blinds_small":30,"blinds_big":60,"ante":0,"duration":600000},{"type":"break","duration":300000},{"type":"round","blinds_small":50,"blinds_big":100,"ante":0,"duration":1200000},{"type":"round","blinds_small":100,"blinds_big":200,"ante":25,"duration":600000},{"type":"round","blinds_small":150,"blinds_big":300,"ante":25,"duration":600000},{"type":"round","blinds_small":200,"blinds_big":400,"ante":50,"duration":600000},{"type":"break","duration":300000},{"type":"round","blinds_small":400,"blinds_big":800,"ante":100,"duration":600000},{"type":"round","blinds_small":600,"blinds_big":1200,"ante":100,"duration":600000},{"type":"round","blinds_small":1000,"blinds_big":2000,"ante":300,"duration":600000},{"type":"round","blinds_small":2000,"blinds_big":4000,"ante":500,"duration":600000},{"type":"round","blinds_small":3000,"blinds_big":6000,"ante":800,"duration":600000}],"rules":{"entrants":6,"buy_in":50,"starting_chips":1E3,"add_on_money":50,"add_on_chips":1E3,"re_buy_money":50,"re_buy_chips":1E3},"prizes":[0.55, 0.20, 0.15, 0.07, 0.03]}}')},function(e){var t,n,i,r={save:function(e,t,i){var r="new";return e in n&&(r="overwrite"),"overwrite"!=r||i?(n[e]=t,void c(function(){E.publish("presets.save",{data:[e,t,r]})})):void E.publish("presets.save.key_exists",{data:[e,t]})},get:function(e){return e?n[e]?n[e]:null:n},remove:function(e){delete n[e],c()},recreate:function(){t=o,i&&u(function(){n=JSON.parse(t),E.publish("presets.restore",{data:[n]})})},key_from_title:function(e){return $.trim(e).split(/\s/g).join("_").toLowerCase()},toString:function(){return t},valueOf:function(){return n},__builtin__:{meta:{name:"__builtin__"},parts:[{type:"round",blinds_small:10,blinds_big:20,ante:0,duration:6e5},{type:"break",duration:6e5}],rules:{entrants:6,buy_in:50,starting_chips:1e3,add_on_money:50,add_on_chips:1e3,re_buy_money:50,re_buy_chips:1e3},prizes:[.55,.2,.15,.07,.03]}},a="presets2",o='{     "tpt_home_game":{"meta":{"name":"Home Game"},"parts":[{"type":"round","blinds_small":10,"blinds_big":20,"ante":0,"duration":600000},{"type":"round","blinds_small":15,"blinds_big":30,"ante":0,"duration":600000},{"type":"round","blinds_small":20,"blinds_big":40,"ante":0,"duration":600000},{"type":"round","blinds_small":25,"blinds_big":50,"ante":0,"duration":600000},{"type":"round","blinds_small":50,"blinds_big":100,"ante":0,"duration":600000},{"type":"round","blinds_small":75,"blinds_big":150,"ante":0,"duration":600000},{"type":"break","duration":600000},{"type":"round","blinds_small":100,"blinds_big":200,"ante":0,"duration":600000},{"type":"round","blinds_small":150,"blinds_big":300,"ante":0,"duration":600000},{"type":"round","blinds_small":200,"blinds_big":400,"ante":0,"duration":600000},{"type":"round","blinds_small":300,"blinds_big":600,"ante":0,"duration":600000},{"type":"round","blinds_small":400,"blinds_big":800,"ante":0,"duration":600000},{"type":"round","blinds_small":500,"blinds_big":1000,"ante":0,"duration":600000},{"type":"break","duration":600000},{"type":"round","blinds_small":600,"blinds_big":1200,"ante":0,"duration":600000},{"type":"round","blinds_small":800,"blinds_big":1600,"ante":0,"duration":600000},{"type":"round","blinds_small":1000,"blinds_big":2000,"ante":0,"duration":600000}],"rules":{"entrants":6,"buy_in":50,"starting_chips":1E3,"add_on_money":50,"add_on_chips":1E3,"re_buy_money":50,"re_buy_chips":1E3},"prizes":[0.55, 0.20, 0.15, 0.07, 0.03]},     "tpt_turbo":{"meta":{"name":"Turbo"},"parts":[{"type":"round","blinds_small":10,"blinds_big":20,"ante":0,"duration":300000},{"type":"round","blinds_small":20,"blinds_big":40,"ante":0,"duration":300000},{"type":"round","blinds_small":50,"blinds_big":100,"ante":0,"duration":300000},{"type":"round","blinds_small":100,"blinds_big":200,"ante":0,"duration":300000},{"type":"round","blinds_small":200,"blinds_big":400,"ante":0,"duration":300000},{"type":"break","duration":300000},{"type":"round","blinds_small":400,"blinds_big":800,"ante":0,"duration":300000},{"type":"round","blinds_small":600,"blinds_big":1200,"ante":0,"duration":300000},{"type":"round","blinds_small":1000,"blinds_big":2000,"ante":0,"duration":300000},{"type":"round","blinds_small":1500,"blinds_big":3000,"ante":0,"duration":300000},{"type":"round","blinds_small":2500,"blinds_big":4000,"ante":0,"duration":300000}],"rules":{"entrants":6,"buy_in":50,"starting_chips":1E3,"add_on_money":50,"add_on_chips":1E3,"re_buy_money":50,"re_buy_chips":1E3},"prizes":[0.55, 0.20, 0.15, 0.07, 0.03]},     "tpt_championship":{"meta":{"name":"Championship"},"parts":[{"type":"round","blinds_small":100,"blinds_big":200,"ante":0,"duration":600000},{"type":"round","blinds_small":200,"blinds_big":400,"ante":0,"duration":600000},{"type":"round","blinds_small":300,"blinds_big":600,"ante":0,"duration":600000},{"type":"round","blinds_small":400,"blinds_big":800,"ante":0,"duration":600000},{"type":"round","blinds_small":500,"blinds_big":1000,"ante":0,"duration":600000},{"type":"round","blinds_small":600,"blinds_big":1200,"ante":0,"duration":600000},{"type":"break","duration":600000},{"type":"round","blinds_small":800,"blinds_big":1600,"ante":0,"duration":600000},{"type":"round","blinds_small":1000,"blinds_big":2000,"ante":0,"duration":600000},{"type":"round","blinds_small":1500,"blinds_big":3000,"ante":0,"duration":600000},{"type":"round","blinds_small":2000,"blinds_big":4000,"ante":0,"duration":600000},{"type":"round","blinds_small":3000,"blinds_big":6000,"ante":0,"duration":600000},{"type":"round","blinds_small":4000,"blinds_big":8000,"ante":0,"duration":600000},{"type":"break","duration":600000},{"type":"round","blinds_small":5000,"blinds_big":10000,"ante":0,"duration":600000},{"type":"round","blinds_small":6000,"blinds_big":12000,"ante":0,"duration":600000},{"type":"round","blinds_small":8000,"blinds_big":16000,"ante":0,"duration":600000}],"rules":{"entrants":6,"buy_in":50,"starting_chips":1E3,"add_on_money":50,"add_on_chips":1E3,"re_buy_money":50,"re_buy_chips":1E3},"prizes":[0.55, 0.20, 0.15, 0.07, 0.03]}     }',s=function(e){return Platform.storage.get(a,e)},u=function(e){Platform.storage.set(a,t,e)},l=function(){t=JSON.stringify(n)},c=function(e){l(),i&&u(e)};s(function(e){i=!!e,e?(n=JSON.parse(e),E.publish("presets.init",{data:n,sticky:!0})):(t=o,u(function(){s(function(e){i=!!e,e&&(n=JSON.parse(e),E.publish("presets.init",{data:n,sticky:!0}))})}))}),e.PresetStorage=r}(this),function(e){"use strict";function t(e,t){o.inst[i.key_from_title(t.data.meta.name)]=t,o.length++}var n=function(e){if(!r.create&&!e.retrieve)return void E.publish("presets.permission.error");var t=this;t.data={meta:{name:""},parts:[],rules:{},prizes:[]},e=e||{};var n=e.fromPreset||o.__builtin__;t.data.meta.name=e.name||e.fromPreset.meta.name,n.parts.forEach(function(e){t.data.parts.push(e)});for(var i in n.rules)t.data.rules[i]=n.rules[i];n.prizes.forEach(function(e){t.data.prizes.push(e)});var a=n.players;if("object"!=typeof a)for(var s=t.data.rules.entrants,a=[],u=0;s>u;u++)a.push("Player "+(u+1));t.data.players=a.slice(),e.retrieve?E.publish("preset.retrieve",{data:[t]}):E.publish("preset.create",{data:[t]})};n.prototype.name=function(e){return e?void(this.data.meta.name=e):this.data.meta.name},n.prototype.save=function(){return r.save?void i.save(o.key_from_title(this.data.meta.name),this.data,!0):void E.publish("presets.save.permission.error")},n.prototype.remove=function(){var e=this;return r.save?void E.publish("preset.remove",{data:[e]}):void E.publish("presets.save.permission.error")},e.Preset=n;var i=e.PresetStorage,r={
create:!1,save:!1};E.bind("presets.permissions",function(e,t){r=t});var a=!1;E.bind("presets.init",function(){a=!0});var o={inst:{},length:0,key_from_title:i.key_from_title,__builtin__:i.__builtin__,retrieve:function(){if(a){var e=i.get();for(var t in e)new n({fromPreset:e[t],retrieve:!0});E.publish("presetlist.retrieve",{data:[o]})}else E.bind("presets.init",function(){o.retrieve()})},create:function(e){return r.create?new n(e):void E.publish("presets.permission.error")},reset:function(){for(var e in o.inst)o.inst[e].remove();i.recreate()},canCreate:function(){return r.create},canSave:function(){return r.save},has:function(e){return!!i.get(i.key_from_title(e))}};E.bind("preset.create",t),E.bind("preset.retrieve",t),E.bind("preset.remove",function(e,t){delete o.inst[i.key_from_title(t.data.meta.name)],o.length--}),E.bind("tournament",o.retrieve),E.bind("presets.restore",o.retrieve),e.PresetList=o}(this);var Tournament=function(e){var t=this;t.tables=[],t.games=[],E.bind("table",function(n,i){t.tables.push(i),e&&e.maxEntrants&&i.rules.entrants.max(e.maxEntrants)}),E.bind("game",function(e,n){t.games.push(n)}),E.publish("tournament",{data:[this]})},PREF=new function(){var e=this,t={start_screen:"#presets",sound:!0,default_preset:"TPT Home Game",total_time_played:0};e.get=function(e){return t[e]}};!function(e){"use strict";function t(t){return new e[n[t.type]](t)}var n={round:"Round","break":"Break",addon_break:"AddonBreak"},i=function(e){if(!e)throw new Error("Preset object is required");E.publish("table.start",{data:[this]});var n=this,i=PresetList.__builtin__;this.preset=e;var r=e.data;n.parts=[],n.prizes=[],n.rules={},r.parts.forEach(function(e,i){var r=$.extend({collection:n},e);n.parts.push(t(r))});var a=Math.max(2,r.players.length);n.rules.entrants=new Value({value:a,min:2,max:1e3,nudge:1,format:"quantity"}),n.rules.buy_in=new Value({value:+(r.rules.buy_in||i.rules.buy_in),min:1,max:1e9,nudge:1,format:"money"}),n.rules.total_money=new Value,n.rules.total_money.derive(n.rules.entrants,n.rules.buy_in,function(e,t){return e.value()*t.value()}).format("money").min(1),n.rules.starting_chips=new Value({value:+(r.rules.starting_chips||i.rules.starting_chips),min:1,max:1e6,nudge:1,format:"quantity"}),n.rules.total_chips=new Value,n.rules.total_chips.derive(n.rules.entrants,n.rules.starting_chips,function(e,t){return e.value()*t.value()}).format("quantity"),n.rules.add_on_money=new Value({value:+(r.rules.add_on_money||i.rules.add_on_money),min:0,max:1e9,nudge:1,format:"money"}),n.rules.add_on_chips=new Value({value:+(r.rules.add_on_chips||i.rules.add_on_chips),min:0,max:1e6,nudge:1,format:"quantity"}),n.rules.re_buy_chips=new Value({value:+(r.rules.re_buy_chips||i.rules.re_buy_chips),min:0,max:1e6,nudge:1,format:"quantity"}),n.rules.re_buy_money=new Value({value:+(r.rules.re_buy_money||i.rules.re_buy_money),min:0,max:1e9,nudge:1,format:"money"}),r.prizes.forEach(function(e,t){var i=new Prize(e,{table:n});n.prizes.push(i)}),n.players=r.players.map(function(e){return new Player(e)}),E.publish("table",{data:[this]})};e.Table=i,i.prototype.addPart=function(e,n){var i=this;if("number"!=typeof n&&(n=i.parts.length),e=$.extend({collection:i},e||this._getNextPartDescriptor())){var r=t(e);i.parts.splice(n,0,r),E.publish("table.part",{data:[r]})}else UI.message.show("Failed to add a new level","Error")},i.prototype.removePart=function(e){var t=this,n=!1,i=t.partIndex(e);return t.parts.length>1?i>=0&&(t.parts.splice(i,1),n=!0):E.publish("parts.min"),n},i.prototype.remove=function(){E.publish("table.remove",{data:[this]})},i.prototype.partIndex=function(e){var t=this,n=-1;return t.parts.forEach(function(t,i){t===e&&(n=i)}),n},i.prototype.changePartType=function(e,t){var n,i=this,r=e.conf;i.parts.forEach(function(t,i){t===e&&(n=i)}),i.removePart(e),r.type=t,i.addPart(r,n)},i.prototype._getNextPartDescriptor=function(){var e=PresetList.__builtin__,t=2,n=this.parts.filter(function(e){return"round"==e.type&&1!=e.infinite});if(n.length)if(n.length>1){var i=n.map(function(e){return e.blinds_big}).slice(n.length-2),r=i[i.length-1],a=F.findMultiplier(i);isFinite(a)||(a=t);var o=n.map(function(e){return e.ante}).slice(n.length-2),s=o[o.length-1],u=F.findMultiplier(o);isFinite(u)||(u=t);var l={blinds_big:F.roundToNearestMultipleOf(a*r,F.findRoundDivisor(r)),ante:F.roundToNearestMultipleOf(u*s,F.findRoundDivisor(s)),duration:n[n.length-1].duration,type:"round"};l.blinds_small=F.roundToNearestMultipleOf(l.blinds_big/2,F.findRoundDivisor(l.blinds_big/2))}else l=$.extend({},n[0]);else var l=$.extend({},e.parts[0]);return l},i.prototype.addPrize=function(e){var t=this;e=e||{};var n=e.percent||0;t.prizes.length<t.players.length?t.prizes.push(new Prize(n,{table:t})):E.publish("prizes.too_many",{data:[t.players.length]})},i.prototype.removePrize=function(e){var t=this,n=!1;return t.prizes.forEach(function(i,r){if(i===e)if(t.prizes.length>1){var a=t.prizes.splice(r,1)[0];a.remove(),n=!0}else E.publish("prizes.too_few")}),n},i.prototype.splicePrizes=function(e){for(var t=this,n=e-1;t.prizes.length>e;)t.removePrize(t.prizes[n]),n--},i.prototype.sumPrizesPercents=function(){var e,t=this,n=function(e){return+e.toFixed()},i=function(e){return n(100*e)},r=t.prizes.reduce(function(e,t){return e+=i(t.percent.value())},0);return e=Value({value:r/100,format:function(e){return(100*e).toFixed()+"%"}})},i.prototype.addPlayer=function(e){var t=this,n=t.rules.entrants.value();t.rules.entrants.plus(),n<t.rules.entrants.value()?t.players.push(new Player(e||"Player "+(t.players.length+1))):E.publish("players.max",{data:t.rules.entrants.max()})},i.prototype.removePlayer=function(e){var t=this,n=!1,i=t.rules.entrants.value();return t.players.forEach(function(r,a){if(r===e)if(t.rules.entrants.minus(),i>t.rules.entrants.value()){var o=t.players.splice(a,1)[0];o.remove(),n=!0}else E.publish("players.min",{data:t.rules.entrants.min()})}),n},i.prototype.toPreset=function(){var e=this,t={meta:{},parts:[],rules:{},prizes:[]},n=["entrants","buy_in","starting_chips","add_on_money","add_on_chips","re_buy_money","re_buy_chips"];return t.meta.name=e.preset.name(),e.parts.forEach(function(e){var n={};n.type=e.type,n.duration=e.duration.value(),!isundef(e.blinds_small)&&(n.blinds_small=e.blinds_small.value()),!isundef(e.blinds_big)&&(n.blinds_big=e.blinds_big.value()),!isundef(e.ante)&&(n.ante=e.ante.value()),t.parts.push(n)}),n.forEach(function(n){t.rules[n]=e.rules[n].value()}),e.prizes.forEach(function(e){t.prizes.push(e.percent.value())}),t.players=e.players.map(function(e){return e.name}),t}}(this),function(e){function t(){var e=this,i=Class.instance_bind(t,e);e.interval_id=setTimeout(i,s.tick),n.call(e)}function n(e){var t=this;if(t.finished)return void clearInterval(t.interval_id);if(!t.paused||e){var n=t.parts[t.current_index.value()];if(!n)return clearTimeout(t.interval_id),void E.publish("game.end");E.publish("game_tick",{data:[{remaining:n.remaining,duration:n.duration,running_time:n.running_time,current_part:n}]});var i=n.remaining.value();if(e){var r=n.remaining.nudge(e).value();i===r&&(0===i?t.current_index.plus():t.current_index.minus())}else{n.running_time.plus();var a=n.remaining.minus().value();isFinite(a)&&i===a&&t.current_index.plus()}}}function i(e,t){for(var n,i=[],r=t.slice();n=r.pop();)i.unshift(Math.round(n*e));return i}function r(e,t){for(var n,r=i(e,t),a=e-r.reduce(function(e,t){return e+t},0),o=function(e,t){return e+t};a;)if(n=i(a,t),r=r.map(function(e,t){return e+n[t]}),assigned_sum=r.reduce(o,0),a=e-assigned_sum,0==n.reduce(o,0)){r[0]+=a;break}return r}function a(e){var t;return e&&e.duration instanceof Value&&(t={remaining:new Value({value:e.duration.value(),min:0,max:e.duration.value(),nudge:SEC}),running_time:new Value({value:0,min:0,nudge:SEC})},$.extend(e,t)),t}function o(e){function n(e,t){if(r.playersOut.unshift(t),!r.finished){var n=r.prizes.filter(function(e){return!e.player}),a=i.players.filter(function(e){return e.active});return n.length>a.length&&r.assignPrize(n.pop(),t),1==a.length?void setTimeout(function(){i.winner=a.pop(),i.winner.win()},10):a.length?void 0:void i.end()}}var i=this,r=this;this.setupParts(e.parts),this.rules=e.rules,this.rules.total_money=new Value({value:e.rules.total_money.value(),format:"money"}),this.prizes=e.prizes.slice(),this.players=e.players,this.playersOut=[],this.table=e,this.current_index=new Value({value:0,min:0,max:this.parts.length}),this.current_index.subscribe(function(e){var t=i.current_index.value();E.publish("game_part_change",{data:[t,i.parts[t]]})}),this.paused=!0,E.publish("game",{data:[this]}),E.bind("player.knockout",n),E.bind("player.win",n),E.bind("player",function(e,t){r.finished||i.rules.total_money.plus(i.rules.buy_in.value())}),E.bind("player.rebuy",function(e,t){r.finished||i.rules.total_money.plus(i.rules.re_buy_money.value())}),E.bind("player.addon",function(e,t){r.finished||"addon_break"==i.parts[i.current_index].type&&i.rules.total_money.plus(i.rules.add_on_money.value())}),E.bind("prize.assigned",function(e,t){r.finished||r.rules.total_money.minus(t.money.value())}),t.call(this)}var s={tick:SEC,sound:!0,turbo_step:10*SEC},u={round:"Round","break":"Break",addon_break:"AddonBreak"};o.prototype.setupParts=function(e){var t=this;t.parts=e.slice();for(var n=t.parts.length-1;n>=0;n--)if("round"==t.parts[n].type){var i=t.parts[n],r=new Round({type:i.type,duration:1/0,ante:i.ante,blinds_small:i.blinds_small,blinds_big:i.blinds_big});r.infinite=!0,t.parts.push(r);break}t.parts.forEach(a),E.publish("game.parts",{data:[t]})},o.prototype.setRule=function(e,t){this.rules[e]&&this.rules[e].set(t)},o.prototype.pause=function(){var e=this;e.paused||(e.paused=!0,E.publish("game_pause"))},o.prototype.start=function(){var e=this;if(e.paused){e.paused=!1;var t=e.current_index.value();E.publish("game_part_change",{data:[t,e.parts[t]]}),E.publish("game_start")}},o.prototype.end=function(){var e=this;e.finished=!0,E.publish("game.end",{data:[e]})},o.prototype.abort=function(){var e=this;e.finished=!0,E.publish("game.aborted",{data:[e]})},o.prototype.faster=function(e){var t=this;n.call(t,e)},o.prototype.forward=function(){var e=this;e.faster(-s.turbo_step)},o.prototype.rewind=function(){var e=this;e.faster(s.turbo_step)},o.prototype.addPlayer=function(e){return this.prizeAssigned()?void E.publish("player.toolate"):Table.prototype.addPlayer.call(this,e)},o.prototype.addPart=function(e){var t=Table.prototype._getNextPartDescriptor.call(this),n=new window[u[e]](t),i=this.parts.length-1;a(n),this.parts.splice(i,0,n),E.publish("game.parts",{data:[this]})},o.prototype.addBreak=function(e){var t=new window[u[e]]({duration:10*MIN,type:e}),n=this.parts.length-1;a(t),this.parts.splice(n,0,t),E.publish("game.parts",{data:[this]})},o.prototype.updatePart=function(e){return a(e)},o.prototype.removePart=function(e){var t=this.parts.indexOf(e);t>=0&&(this.parts.splice(t,1),E.publish("game.parts",{data:[this]}))},o.prototype.prizeAssigned=function(){return this.prizes.some(function(e){return e.hasOwnProperty("player")})},o.prototype.assignPrize=function(e,t){var n=this;if(!e&&!t)return!1;e.player=t,t.prize=e;var i=n.prizes.filter(function(e){return!e.player}),a=i.map(function(e){return e.percent.value()}).concat([e.percent.value()]);e.money=new Value({value:r(n.rules.total_money.value(),a).pop(),format:"money",frozen:!0}),E.publish("prize.assigned",{data:[e]})},o.prototype.getPrizesCurrentValues=function(){var e=this,t=e.prizes.filter(function(e){return!e.player}),n=e.prizes.filter(function(e){return!!e.player}),i=t.map(function(e){return e.percent.value()});return r(e.rules.total_money.value(),i).concat(n.map(function(e){return e.money.value()}))},o.prototype.getTitle=function(){return this.table.preset.data.meta.name},o.prototype.getCurrentIndex=function(){return"object"==typeof this.current_index?this.current_index.value():0},o.prototype.toJSON=function(){return{current_index:this.current_index,parts:this.parts,paused:this.paused,players:this.players,prizes:this.prizes,rules:this.rules}},e.Game=o}(this),function(e){var t=function(e){this.type=e.type,this.conf=e,this.duration=new Value({value:+e.duration,min:MIN,max:isFinite(e.duration)?60*MIN:1/0,nudge:SEC,format:function(e){return isFinite(e)?e/MIN+" min":"&infin;"},unformat:function(e,t){var n=+t(e),i=parseInt(n);return i*MIN}})};e.Part=t,t.prototype.changeType=function(e){this.conf.type=e},t.prototype.index=function(){return this.conf.collection.partIndex(this)}}(this),function(e){var t=e.Part,n=Class(function(e){t.call(this,e),this.blinds_small=new Value({value:+e.blinds_small,min:0,max:1e6,nudge:1,unformat:parseInt}),this.blinds_big=new Value({value:+e.blinds_big,min:0,max:1e6,nudge:1,unformat:parseInt}),this.ante=new Value({value:+e.ante,min:0,max:1e6,nudge:1,format:{nill:"-"},unformat:function(e){var t=parseInt(e);return isNaN(t)?0:t}})});n.inherit_from(t),n.prototype.label="round",e.Round=n}(this),function(e){var t=e.Part,n=Class(function(e){t.call(this,e)});n.inherit_from(t),n.prototype.label="break",e.Break=n}(this),function(e){var t=e.Break,n=Class(function(e){t.call(this,e)});n.inherit_from(t),n.prototype.label="add-on break",e.AddonBreak=n}(this),function(e){var t=function(e,t){var n=this;this.percent=new Value({value:+e,min:.01,max:1,nudge:.01,format:function(e){return(100*e).toFixed()+"%"},unformat:function(e,t){return t(e)/100}}),this.percent.subscribe(function(){E.publish("prize.change",{data:[n,t.table]})}),E.publish("prize",{data:[this,t.table]})};t.prototype.remove=function(){E.publish("prize.remove",{data:[this]})},e.Prize=t}(this),function(e){var t=function(e){this.name=e,this.active=!0,E.publish("player",{data:[this]})};t.prototype.remove=function(){E.publish("player.remove",{data:[this]})},t.prototype.knockOut=function(){this.active=!1,E.publish("player.knockout",{data:[this]})},t.prototype.win=function(){this.active=!1,E.publish("player.win",{data:[this]})},t.prototype.reBuy=function(){this.active&&E.publish("player.rebuy",{data:[this]})},t.prototype.addOn=function(){this.active&&E.publish("player.addon",{data:[this]})},e.Player=t}(this),E.bind("tournament",function(e,t){var n,i,r=function(){i.inputsPartsMerge(n.rules).dataBind({total_money:n.rules.total_money,total_chips:n.rules.total_chips,entrants:n.rules.entrants})},a=function(){i=$("#rules_config"),r(),$("select[name=currency]").unbind().change(function(){Value.prototype.formatters.money.symbol=$(this).val();for(var e in n.rules){var t=n.rules[e],i=t.format&&t.format();i&&i.symbol&&(t.format("money"),t.refresh())}E.publish("currency",{data:[Value.prototype.formatters.money.symbol]})}).focus(function(){$(this).parent().addClass("in-focus")}).blur(function(){$(this).parent().removeClass("in-focus")}),$("#goto_prizes").unbind("click").click(function(){UI.goto_view("prizes")})};E.bind("table",function(){n=t.tables[t.tables.length-1],a()}),E.bind("request.view.unload",function(e,t){"rules"==t.current&&E.publish("view.unload",{data:[!0]})})}),E.bind("tournament",function(e,t){function n(e,t){var n=$("#templates").find(".configure .prize"),i=n.clone(!0).inputsPartsMerge(e),r=new Value;return r.derive(t.rules.total_money,e.percent,function(e,t){return e.value()*t.value()}).format("money"),i.dataBind({prize_money:r}),i.find(".delete").click(function(){return t.removePrize(e),!1}),o.append(i),i.scrollToAndFlash(),{prize:e,money:r,node:i}}function i(){return 1===a.sumPrizesPercents().value()}function r(){var e=i();return e||UI.message.show("The prizes do not add up to 100%. Please adjust them before starting the game."),e}var a,o=$("#prize_list"),s=[];$("#prizes").find(".add_prize").click(function(){return a.addPrize(),!1}),$("#goto_game").click(function(){a.prizes.sort(function(e,t){return t.percent.value()-e.percent.value()}),r()&&new Game(a)}),E.bind("table.start",function(e,t){o.empty(),a=t,s=[]}),E.bind("prize",function(e,t,i){s.push(n(t,i))}),E.bind("prize.change",function(e,t){var n=a.sumPrizesPercents();n.value()>1&&UI.notify("Total prizes greater than 100%","The sum of prizes is currently "+n.get()+". Make sure it adds up to 100%"),n.value()<1&&UI.notify("Total prizes smaller than 100%","The sum of prizes is currently "+n.get()+". Make sure it adds up to 100%")}),E.bind("prize.remove",function(e,t){s.filter(function(e){return e.prize===t})[0].node.remove()}),E.bind("prizes.too_many",function(e,t){UI.message.show("You cannot have more prizes than players (currently "+t+")")}),E.bind("prizes.too_few",function(e){UI.message.show("You have to have at least 1 prize.")}),E.bind("player.remove",function(e){a.prizes.length>a.players.length&&a.splicePrizes(a.players.length)}),E.bind("currency",function(){s.forEach(function(e){e.money.format("money"),e.money.refresh()})}),E.bind("request.view.unload",function(e,t){"prizes"==t.current&&E.publish("view.unload",{data:[r()]})})}),E.bind("tournament",function(e,t){function n(e){e?o.addClass("active"):o.removeClass("active")}var i,r=0,a=$("#players_list"),o=$("#allow-in-game-entrants"),s=o.find("input");E.bind("player",function(e,t){setTimeout(function(){var e=$("#templates").find(".configure .player"),n=e.clone(!0);n.dataObj("player",t),n.find("input[name=name]").val(t.name).attr("tabindex",r+1).change(function(){t.name=$(this).val()}),E.bind("player.remove",function(e,t){t===n.dataObj("player")&&n.remove()}),n.find(".delete").click(function(){return i.removePlayer(t),!1}),a.append(n),r++,n.scrollToAndFlash()},1)}),E.bind("table",function(e,t){i=t,a.empty(),$(".add_player").unbind("click").click(function(){return t.addPlayer(),!1}),n(t.rules.allowNewPlayersInGame),s.unbind("change").change(function(){var e=this.checked;t.rules.allowNewPlayersInGame=e,n(e)})}),E.bind("players.min",function(e,t){UI.message.show("You have to have at least "+t+" players.")}),E.bind("players.max",function(e,t){25>t&&UI.message.show("Tournaments with more than "+t+' players are only available for Poker Timer PRO users. <a href="http://www.thepokertimer.com/upgrade" class="browser">Go here to upgrade your account</a> and get access to this and lots of other awesome features.',"Upgrade to use add more players")}),E.bind("request.view.unload",function(e,t){"players"==t.current&&E.publish("view.unload",{data:[!0]})})}),$("#goto_rules").click(function(){return UI.goto_view("rules"),!1}),E.bind("tournament",function(e,t){function n(e){return e.parts[e.current_index.value()]}function i(e){return e.parts.slice(e.current_index.value()+1,e.parts.length-1)}function r(e){return!!e.type.match("break")}function a(e){return!!e.type.match("round")}function o(){var e=function(){clearTimeout(l.__turboID__),l.__turboMode__=!0,l.forward(),l.__turboID__=setTimeout(e,100)};e()}function s(){l.__turboMode__=!1,clearTimeout(l.__turboID__)}function u(){var e=function(){clearTimeout(l.__turboID__),l.__turboMode__=!0,l.rewind(),l.__turboID__=setTimeout(e,100)};e()}var l,c=$("#game"),d=F.changeNotifier();E.bind("game",function(e,t){l=t;var n=l.parts[0];if(n){var i=l.parts[0].remaining.value();isFinite(i)&&$("#time").text(UTIL.format.time(i)),a(n)&&($("#game_ante").text(n.ante.format(function(e){return String(e)}).get()),$("#game_blinds").text(n.blinds_small+"/"+n.blinds_big)),$("#game_level").dataBind({level:F.capitalizeFirst(n.label)+" 1"})}$("#game_title").dataBind({title:F.textOverflow(l.table.preset.data.meta.name,48)}),$("#goto-parts").click(function(e){UI.goto_view("parts"),e.preventDefault()}),c.find("#game_title").text(l.preset_name)});var f=function(){l=void 0,E.unsubscribeAll("player.knockout"),E.unsubscribeAll("player.win"),isChromeExtension&&chrome.power.releaseKeepAwake()};E.bind("game.aborted",function(){Sound.clearQueue(),Sound.stop(),f()}),E.bind("game.end",f),E.bind("player.rebuy",function(){setTimeout(displayPrizes,1),Sound.play("re_buy")}),E.bind("player.addon",function(){setTimeout(displayPrizes,1),Sound.play("add_on")}),E.bind("prize.assigned",function(){setTimeout(displayPrizes,1)});var p=($("#templates"),$("#game_parts ol"),$("#templates .static").find(".player"),$("#players_active ol"),$("#players_out ol"),"");$("#stop").click(function(){return l.pause(),Sound.stop(),$(this).hide(),$("#play").show(),!1}),$("#play").click(function(){return l.start(),$(this).hide(),$("#stop").show(),!1}),$("#fwd").mousedown(o),$("#fwd").bind("touchstart",o),$("#fwd").mouseup(s),$("#fwd").bind("touchend",s),$("#fwd").mouseout(s),$("#rew").mousedown(u),$("#rew").bind("touchstart",u),$("#rew").mouseup(s),$("#rew").bind("touchend",s),$("#rew").mouseout(s),E.bind("game_tick",function(e,t){var n=t.remaining.value();if(isFinite(n)){if($("#time").text(UTIL.format.time(n)),UI.progress.update(1-n/t.duration.value()),!l.__turboMode__){var a,o=n/SEC;t.duration.value()/SEC,0==l.current_index.value();10==o&&(a="10_sec_beep_countdown"),a&&Sound.play(a)}for(var s=n,u=i(l),c=0,f=!1;u[c];){if(r(u[c])){f=!0;break}s+=u[c].duration.value(),c++}if(f){var p=Math.floor(s/MIN),h=p?"":"less than ",m=Math.max(1,p);d(h+m)&&UI.ticker.write("Prochain break dans "+h+m+" "+F.pluralize("minute",m))}else{var b="No more breaks until the end of tournament";d(b)&&UI.ticker.write(b)}}else{$("#time").text(UTIL.format.time(t.running_time.value()));var g="This is the last round";d(g)&&UI.ticker.write(g)}v()});var h=!1;E.bind("TPT.user.authentication.success",function(e,t,n){"free"==n&&(h=!0)});var m=function(e,t,n){var i=0,r=0;l.parts.forEach(function(e){e.type===n.type&&(i+=1),e===n&&(r=i)}),p=n.type,c.find("#game_level").dataBind({level:F.capitalizeFirst(n.label)+" "+r});var a=$("#game_parts ol > li").eq(t+1);$("#game_parts ol > li").removeClass("selected"),a.addClass("selected"),a[0]&&a[0].scrollIntoViewIfNeeded(),n.duration==1/0&&(a.removeClass("infinite"),UI.progress.update(1)),UI.adjustTextSize("#game_blinds");var o=0===t,s=n.duration.value()===n.remaining.value();o&&s&&Sound.play("play_poker"),v()},v=function(){var e=n(l),t=e.remaining.value();isFinite(t)&&$("#time").text(UTIL.format.time(t)),a(e)?(c.find("#game_ante").text(e.ante.get()),c.find("#game_blinds").text(e.blinds_small+"/"+e.blinds_big)):c.find("#game_ante, #game_blinds").text("");var r=i(l).filter(function(e){return"round"===e.type})[0];r&&($("#blinds-next").text("Prochaines "+r.blinds_small+"/"+r.blinds_big),$("#ante-next").text("Prochain "+r.ante.format(function(e){return String(e)}).get()))};E.bind("game_part_change",m),E.bind("gameEdit",function(){v()})}),E.bind("tournament",function(e,t){function n(e){var t=u[e.type].node.clone();u[e.type].actions;return t?("round"===e.type&&t.dataBind({num:s++}),e.type.match("break")&&t.dataBind({duration:e.duration,type:u[e.type].label}),t.inputsPartsMerge(e).dataObj("part",e),t):null}var i=$("#parts"),r=$("#templates").find(".configure .round"),a=$("#templates").find(".configure .break"),o=i.find("#parts_list"),s=1,u={round:{type:"round",label:"round",node:r,actions:[1,2]},"break":{type:"break",label:"break",node:a,actions:[0,2]},addon_break:{type:"addon_break",label:"add-on break",node:a,actions:[0,1]}};Object.keys(u).map(function(e){return u[e]});E.bind("table.part",function(e,t){var i=n(t);0==t.index()?i.prependTo(o):i.insertAfter(o.children("li")[t.index()-1]),i.scrollToAndFlash()}),E.bind("parts.min",function(e){UI.message.show("You have to have at least 1 round.")}),E.bind("game.parts",function(e,t){function r(){E.publish("gameEdit")}s=1,o.empty(),i.find("header").dataBind({title:F.textOverflow("Default",48)}),t.parts.forEach(function(e,i){var a=isFinite(e.duration.value()),s=a&&i!=t.getCurrentIndex();if(a){var u=n(e);u.appendTo(o)}s&&u.find(".delete").click(function(){t.removePart(e)}),"round"===e.type&&(e.blinds_small.subscribe(r),e.blinds_big.subscribe(r),e.ante.subscribe(r)),e.duration.subscribe(function(){t.updatePart(e),r()})}),i.find("button.add_part").unbind("click").click(function(){return t.addPart("round"),$("#parts_list > li:last-child")[0].scrollIntoViewIfNeeded(),!1}),i.find("button.add_break").unbind("click").click(function(){return t.addBreak("break"),$("#parts_list > li:last-child")[0].scrollIntoViewIfNeeded(),!1}),i.find("#goto-game").click(function(){UI.goto_view("game")})})}),E.bind("game.end",function(e,t){Sound.clearQueue(),Sound.play("we_have_a_winner");var n=$("#templates .static").find(".player"),i=$("#winners_list");i.empty(),UI.goto_view("aftermatch"),t.playersOut.forEach(function(e){n.clone().dataBind({name:e.name,prize:e.prize?e.prize.money.get():"-"}).appendTo(i)}),$("#back_to_start").unbind("click").click(function(){i.empty(),UI.goto_view("presets")}),$("#share_to_fb").unbind("click").click(function(){PLATFORM.facebook.share([t.winner.name,"just won the",t.getTitle(),"tournament using The Poker Timer.","With",t.playersOut.filter(function(e){return e!==t.winner}).map(function(e){return e.name}).join(", ")+"."].join(" "))})}),function(){TPT.tournament=new Tournament({maxEntrants:1e3}),new Game(new Table(PresetList.inst["default"])),E.publish("presets.permissions",{data:[{save:!0,create:!0}],sticky:!0}),E.publish("ui.permissions",{data:[{maximizable:!0}],sticky:!0}),E.publish("ads.permissions",{data:[{enabled:!1}],sticky:!0}),UI.goto_view("game")}(),E.bind("game.aborted",function(){UI.goto_view("presets")}),E.bind("origin.version.warn",function(){UI.message.show("There is a new version of The Poker Timer. Click OK to go to download page and upgrade your app.","","",function(){Browser.open("http://www.thepokertimer.com/download?ref=app")})}),E.bind("origin.version.block",function(){UI.message.show("You are using an older version of The Poker Timer that is no longer supported. Click OK to go to download page and upgrade your app.","","",function(){Browser.open("http://www.thepokertimer.com/download?ref=app")})}),E.bind("origin.message",function(e,t){UI.message.show(t)});